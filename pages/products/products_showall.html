<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
    <meta charset="UTF-8">
    <meta name="description" content="‡∏õ‡∏π‡∏ô‡∏™‡∏¥‡∏á‡πÇ‡∏ï - ‡∏à‡∏≥‡∏´‡∏ô‡πà‡∏≤‡∏¢‡∏õ‡∏π‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏∏‡∏Å‡∏á‡∏≤‡∏ô‡∏Å‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á">
    <meta property="og:title" content="‡∏ú‡∏•‡∏¥‡∏ï‡∏†‡∏±‡∏ì‡∏ë‡πå-‡∏õ‡∏π‡∏ô‡∏™‡∏¥‡∏á‡πÇ‡∏ï - ‡∏õ‡∏π‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏∏‡∏Å‡∏á‡∏≤‡∏ô‡∏Å‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á" />
    <meta property="og:description" content="‡∏õ‡∏π‡∏ô‡∏™‡∏¥‡∏á‡πÇ‡∏ï - ‡∏à‡∏≥‡∏´‡∏ô‡πà‡∏≤‡∏¢‡∏õ‡∏π‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏∏‡∏Å‡∏á‡∏≤‡∏ô‡∏Å‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á ‡∏ó‡∏±‡πâ‡∏á‡∏õ‡∏π‡∏ô‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á ‡∏õ‡∏π‡∏ô‡∏â‡∏≤‡∏ö ‡πÅ‡∏•‡∏∞‡∏õ‡∏π‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏£‡∏π‡∏õ" />
    <meta property="og:image" content="https://www.yourwebsite.com/assets/images/banners/productbanner1.jpg" />
    <meta property="og:url" content="https://www.yourwebsite.com/pages/products/products_showall.html" />
    <meta property="og:type" content="website" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏ú‡∏•‡∏¥‡∏ï‡∏†‡∏±‡∏ì‡∏ë‡πå-‡∏õ‡∏π‡∏ô‡∏™‡∏¥‡∏á‡πÇ‡∏ï</title>
    <link rel="icon" type="image/png" href="assets/icons/favicon.ico">
    <link rel="stylesheet" href="/css/product-poonsingto.css">

    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- Swiper CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <!-- Swiper JS -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>

</head>
<body>

<!-- base all website -->
<div id="preloader">
  <div class="cement-truck-animation">
    <img src="/assets/icons/lci-truck.gif" alt="">
    <div class="pouring"></div>
    <p>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ó‡∏õ‡∏π‡∏ô ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà...</p>
  </div>
</div>








<!-- desktop view -->
<div class="desktop-product-show">

        <!-- product header -->
        <header class="ps-product-custom-header">
            <div class="ps-product-header-top">
                <h1 class="ps-product-lci">‡∏ú‡∏•‡∏¥‡∏ï‡∏†‡∏±‡∏ì‡∏ë‡πå‡∏õ‡∏π‡∏ô‡∏™‡∏¥‡∏á‡πÇ‡∏ï</h1>
            </div>

            <!-- Navigation -->
            <div class="NavOfPoonSingtoolayout">
            <nav class="main-nav">
                <div class="nav-header-mobile-wrapper"> 
                    <div class="nav-lci-above-group1">
                        <a href="/">
                            <div class="nav-logoLCI">
                                <div class="nav-img-logoLCI">
                                </div>
                                <div class="nav-titlename-logoLCI">
                                    <h3>LCI-Thailand</h3>
                                </div>
                            </div>
                        </a>
                    </div>
                    <div class="hamburger-menu">
                        <div class="bar"></div>
                        <div class="bar"></div>
                        <div class="bar"></div>
                    </div>
                </div>

                <ul class="nav-list">
                    <li><a href="/index.html">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a></li>
                    <li><a href="/pages/about.html">‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÄ‡∏£‡∏≤</a></li>
                    <li class="dropdown">
                        <a href="/pages/products/products_showall.html">‡∏ú‡∏•‡∏¥‡∏ï‡∏†‡∏±‡∏ì‡∏ë‡πå</a>
                        </li>
                    <li><a href="/pages/marketing.html">‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£</a></li>
                    <li><a href="/pages/howtoPays.html">‡∏ß‡∏¥‡∏ò‡∏µ‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</a></li>
                    <li><a href="/pages/contact.html">‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤</a></li>
                </ul>
            </nav>
            </div>
            

            <!-- mobile search bar -->
            <div class="mobile-pro-s-filter-bar">
                                <!-- Title for mobile, hidden on desktop -->
                                <div class="mobile-psfb-title">
                                    <h3>‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h3>
                                </div>

                                <!-- Search Input Group -->
                                <div class="mobile-search-input-wrapper">
                                    <i class="fa-solid fa-magnifying-glass search-icon"></i>
                                    <input type="text" id="searchInput" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤...">
                                </div>

                                <!-- Location Filters Group -->
                                <div class="mobile-location-filters-wrapper">
                                    <select id="provinceFilter">
                                        <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î</option>
                                    </select>
                                    <select id="districtFilter" disabled>
                                        <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏≥‡πÄ‡∏†‡∏≠</option>
                                    </select>
                                </div>

                                <!-- Search Button Group -->
                                <div class="mobile-search-button-wrapper">
                                    <button onclick="filterProducts()"><i class="fa-solid fa-magnifying-glass"></i> ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</button>
                                </div>
            </div>
            <!-- ----------------------------- -->

        </header>
        



        <main>


            <!-- Product -->
            <section class="pro-s-product-showcase pro-s-full-width"> 

                <!-- how to use -->
                <div>
                    <div>
                      <button id="toggleTipsBtn" class="info-button">
                        <i class="fas fa-info-circle"></i> 
                        <h3>‡∏Å‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡πà‡∏≤‡∏ô‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô*</h3>
                      </button>
                    </div>
                    <div class="pro-s-how-to-use-search pro-s-hidden">
                        <p style="font-weight: 600;">‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô</p>
                        <ul>
                            <li>1. ‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏Å‡πá‡πÑ‡∏î‡πâ</li>
                            <li>2. ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Å‡πà‡∏≠‡∏ô ‡∏ñ‡∏∂‡∏á‡∏à‡∏∞‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏≥‡πÄ‡∏†‡∏≠‡πÑ‡∏î‡πâ</li>
                            <li>3. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏≥‡πÄ‡∏†‡∏≠‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£</li>
                            <li>4. ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</li>
                        </ul>
                    </div>
                </div>           
                <!-- ----------------------------- -->
                
                <!-- product filter buy -->
                <div  class="product-all-con">

                    <!-- adv. container -->
                    <!-- <div class="pro-s-adv-filters-box">
                      
                      <div class="pro-s-adv-container">
                                                                  
                        <h3>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</h3>
                        <div>
                          <nav>
                              <ul class="pro-s-adv-product-type-tabs">
                                  <li class="pro-s-pd-adv-type active" onclick="switchType(this, 'all')">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</li>
                                  <li class="pro-s-pd-adv-type" onclick="switchType(this, 'bag')" >‡πÅ‡∏ö‡∏ö‡∏ñ‡∏∏‡∏á</li>
                                  <li class="pro-s-pd-adv-type" onclick="switchType(this, 'truck')">‡πÅ‡∏ö‡∏ö‡∏ú‡∏á</li>
                              </ul>
                          </nav>
                        </div>

                        <h3>‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h3>
                        <div class="pro-s-adv-advanced-filters">
                          <div>
                            <label><input type="radio" name="mixeddang" id="‡∏õ‡∏π‡∏ô‡∏™‡∏¥‡∏á‡πÇ‡∏ï‡πÅ‡∏î‡∏á"> ‡∏õ‡∏π‡∏ô‡∏™‡∏¥‡∏á‡πÇ‡∏ï‡πÅ‡∏î‡∏á</label>
                          </div>                        
                          <div>
                            <label><input type="radio" name="mixeddang" id="‡∏õ‡∏π‡∏ô‡∏™‡∏¥‡∏á‡πÇ‡∏ï‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß"> ‡∏õ‡∏π‡∏ô‡∏™‡∏¥‡∏á‡πÇ‡∏ï‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß</label>
                          </div>
                        </div>
                 
                      </div>                   
                    </div> -->

                    <!-- product container -->
                    <div class="ps-product-container">

                       


                      <!-- filter type -->
                      <div class="pro-s-product-type-selector">
                          <h3>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</h3>
                          <nav>
                              <ul class="pro-s-product-type-tabs">
                                  <li class="pro-s-pd-type active" onclick="switchType(this, 'all')">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</li>
                                  <li class="pro-s-pd-type" onclick="switchType(this, 'bag')" >‡πÅ‡∏ö‡∏ö‡∏ñ‡∏∏‡∏á</li>
                                  <li class="pro-s-pd-type" onclick="switchType(this, 'truck')">‡πÅ‡∏ö‡∏ö‡∏ú‡∏á</li>
                              </ul>
                          </nav>
                      </div>
                      <!-- ----------------------------- -->



                      <!-- Show product all -->               
                      <div id="productGrid" class="p-c-product-grid">
                        <!-- create card auto --> 
                      </div>
                      <!-- ----------------------------- -->
                
                    </div>
                      
                    <div>
                        <!-- Cart Slide-in Container -->
                        <div class="cart-section-container hidden" id="cartSection">
                            <div class="product-cart-tab">

                                <div class="p-cart-title">
                                <h3>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h3>
                                <button id="closeCartBtn" class="close-cart">‚úï</button>
                                </div>

                                <div class="products-carts-container">
                                <div id="cartItems">

                                </div>
                                </div>

                                <div class="p-cart-result">
                                    <div class="pcr-box">
                                        <div id="cartSummary">
                                            
                                        </div>
                                    </div>                        
                                </div>
                            </div>
                        </div>
                        
                        <!-- Cart button -->
                        <div style="position: fixed; bottom: 20px; right: 20px;  z-index: 5;">
                        <button id="openCartBtn" 
                            style="
                                position: fixed; 
                                bottom: 20px; 
                                right: 20px; 
                                background: linear-gradient(to right, #d70000, #8f0000);
                                color: white; 
                                padding: 15px 20px; 
                                border-radius: 50px; 
                                font-size: 1rem; 
                                border: none; 
                                box-shadow: 0 2px 10px rgba(0,0,0,0.2); 
                                z-index: 999; 
                                cursor: pointer; 
                                position: relative; /* ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÉ‡∏´‡πâ span ‡∏ô‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏à‡∏±‡∏î‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÑ‡∏î‡πâ */
                                display: flex; /* ‡∏à‡∏±‡∏î‡πÉ‡∏´‡πâ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á */
                                align-items: center;
                                gap: 8px; /* ‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° */
                            ">
                            <div class="desktop-cart-btn">
                                <i class="fa-solid fa-cart-plus"></i> ‡∏î‡∏π‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤
                            </div>
                            <div class="mobile-cart-btn">
                                <i class="fa-solid fa-cart-plus"></i> 
                            </div>
                        <span id="cartItemCount" 
                            style="
                                position: absolute; 
                                top: -5px; 
                                right: -5px; 
                                background-color: #ffc107; 
                                color: #333; 
                                border-radius: 50%; 
                                padding: 5px 8px; 
                                font-size: 0.75rem; 
                                font-weight: bold; 
                                display: none; /* ‡∏ã‡πà‡∏≠‡∏ô‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ */
                                min-width: 24px; /* ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡πÄ‡∏•‡πá‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ */
                                text-align: center; /* ‡∏à‡∏±‡∏î‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á */
                                box-sizing: border-box; /* ‡πÉ‡∏´‡πâ padding ‡πÑ‡∏°‡πà‡∏î‡∏±‡∏ô‡∏Ç‡∏ô‡∏≤‡∏î‡∏≠‡∏≠‡∏Å‡πÑ‡∏õ‡∏ô‡∏≠‡∏Å */
                            ">0</span>
                    </button>                 
                        </div>
                    </div>
                    
                    
                </div>               
                <!-- ----------------------------- -->
     
                
            </section>
            










            <section class="ps-p-how-it-works">
              <h2>‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£?</h2>
              <div class="ps-p-steps">
                <div class="ps-p-step">
                  <div class="ps-p-step-icon">üõí</div>
                  <h3>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h3>
                  <p>‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏≤‡∏Å‡∏´‡∏•‡∏≤‡∏Å‡∏´‡∏•‡∏≤‡∏¢‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</p>
                </div>
                <div class="ps-p-step">
                  <div class="ps-p-step-icon">üì¶</div>
                  <h3>‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</h3>
                  <p>‡πÉ‡∏™‡πà‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏à‡∏±‡∏î‡∏™‡πà‡∏á‡πÅ‡∏•‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</p>
                </div>
                <div class="ps-p-step">
                  <div class="ps-p-step-icon">üöö</div>
                  <h3>‡∏£‡∏≠‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h3>
                  <p>‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏à‡∏±‡∏î‡∏™‡πà‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß‡∏ñ‡∏∂‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ö‡πâ‡∏≤‡∏ô‡∏Ñ‡∏∏‡∏ì</p>
                </div>
              </div>
            </section>

            <section class="ps-p-benefits">
              <h2>‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏£?</h2>
              <ul class="ps-p-benefit-list">
                <li>üöö ‡∏™‡πà‡∏á‡∏ü‡∏£‡∏µ‡∏ó‡∏±‡πà‡∏ß‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®</li>
                <li>üí≥ ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á</li>
                <li>üõ°Ô∏è ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏≠‡πÉ‡∏à</li>
                <li>üìû ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ 24 ‡∏ä‡∏°.</li>
              </ul>
            </section>

            <section class="ps-p-newsletter-subscribe">
              <h2>‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏£‡∏±‡∏ö‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£</h2>
              <p>‡∏£‡∏±‡∏ö‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏Ñ‡∏£</p>
              <form class="ps-p-subscribe-form">
                <input type="email" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì" required />
                <button type="submit">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÄ‡∏•‡∏¢</button>
              </form>
            </section>

        </main>
</div>
    






<!-- pop up ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ -->
<div class="popup-product-detail hidden" id="productDetailPopup">
      <div class="popup-overlay" onclick="closeProductPopup()"></div>
      <div class="popup-box">
        <button class="popup-close" onclick="closeProductPopup()">√ó</button>
        <div id="popupProductContent"></div>
      </div>
</div>


<div class="image-zoom-popup" id="imageZoomPopup">
        <div class="image-zoom-content">
            <span class="image-zoom-close-button" onclick="closeImageZoomPopup()">&times;</span>
            <img id="zoomed-image" src="" alt="‡∏†‡∏≤‡∏û‡∏Ç‡∏¢‡∏≤‡∏¢" class="zoomed-image">
        </div>
</div>




<!-- mobile view -->
<div class="mobile-product-show">


</div>
    


<!-- scripts area -->

<script>


// =============================================================
// =============== GLOBAL VARIABLES ============================

let allData = null;
let currentType = "all";
let cart = JSON.parse(localStorage.getItem("currentCart")) || [];
const cartSection = document.getElementById("cartSection");
const openCartBtn = document.getElementById("openCartBtn");
const closeCartBtn = document.getElementById("closeCartBtn");
const cartItemCountSpan = document.getElementById("cartItemCount");

document.addEventListener("DOMContentLoaded", async () => { 
    if (openCartBtn) {
        openCartBtn.addEventListener('click', toggleCartSection);
    }
    if (closeCartBtn) {
        closeCartBtn.addEventListener('click', toggleCartSection);
    }
    updateCartUI();

    // =============== PRELOADER ===================================
    const preloader = document.getElementById("preloader");
    if (preloader) {
        setTimeout(() => {
            preloader.style.opacity = '0';
            preloader.addEventListener('transitionend', () => {
                preloader.style.display = 'none';
            }, { once: true });
        }, 300);
    }
    // =============================================================

    // =============== ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡πà‡∏≤‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ =================
    await fetchData();

    const provinceFilter = document.getElementById("provinceFilter");
    const districtFilter = document.getElementById("districtFilter");

    if (provinceFilter && districtFilter) {
        if (allData && allData.provinces) {
            allData.provinces.forEach(province => {
                const option = document.createElement("option");
                option.value = province;
                option.textContent = province;
                provinceFilter.appendChild(option);
            });
        }

        const storedFilterState = JSON.parse(localStorage.getItem("filterState"));
        if (storedFilterState && storedFilterState.province) {
            provinceFilter.value = storedFilterState.province;
            if (allData && allData.districts && allData.districts[storedFilterState.province]) {
                districtFilter.innerHTML = '<option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏≥‡πÄ‡∏†‡∏≠/‡πÄ‡∏Ç‡∏ï</option>';
                allData.districts[storedFilterState.province].forEach(district => {
                    const option = document.createElement("option");
                    option.value = district;
                    option.textContent = district;
                    districtFilter.appendChild(option);
                });
                districtFilter.value = storedFilterState.district || ""; // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏≠‡∏≥‡πÄ‡∏†‡∏≠
            }
            filterProducts();
        } else {
            renderCards(allData.products, null, null);
        }

        provinceFilter.addEventListener("change", () => {
            loadDistricts(provinceFilter.value);
            filterProducts();
        });
        districtFilter.addEventListener("change", filterProducts); // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å filterProducts ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏≠‡∏≥‡πÄ‡∏†‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô
    }
});

function toggleCartSection() {
    if (cartSection.classList.contains("hidden")) {
        cartSection.classList.remove("hidden");
        setTimeout(() => {
            cartSection.classList.add("show");
        }, 10);
    } else {
        cartSection.classList.remove("show");
        cartSection.addEventListener('transitionend', function handler() {
            cartSection.classList.add("hidden");
            cartSection.removeEventListener('transitionend', handler);
        });
    }
}

function showCart() {
    const cartEl = document.getElementById("cartSection");
    cartEl.classList.remove("hidden");
    setTimeout(() => {
        cartEl.classList.add("show");
    }, 10);
}

function hideCart() {
    const cartEl = document.getElementById("cartSection");
    cartEl.classList.remove("show");
    cartEl.addEventListener('transitionend', function handler() {
        cartEl.classList.add("hidden");
        cartEl.removeEventListener('transitionend', handler);
    });
}

function updateCartItemCount() {
    const uniqueItemCount = cart.length;

    if (uniqueItemCount > 0) {
        cartItemCountSpan.textContent = uniqueItemCount;
        cartItemCountSpan.style.display = "block";
    } else {
        cartItemCountSpan.style.display = "none";
    }
}



function showProductPopup(product) {
    const popup = document.getElementById("productDetailPopup");
    const content = document.getElementById("popupProductContent");

    document.body.classList.add('no-scroll');

    const images = [
        product.image,
        product.image1,
        product.image2,
        product.image3,
    ].filter((img, index, self) => img && self.indexOf(img) === index);

    const thumbnailsHTML = images
        .map(
            (img) =>
                `<img
                    src="/assets/images/products/${img}"
                    alt="‡∏£‡∏π‡∏õ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°"
                    style="width: 70px; height: 70px; border-radius: 6px; object-fit: cover; cursor: pointer; border: 2px solid #ddd;"
                    onclick="document.getElementById('mainPopupImg').src='/assets/images/products/${img}';"
                >`
        )
        .join("");

    const minQuantity = product.type === "bag" ? 640 : (parseInt(product.minimum) || 1);
    const initialQuantity = minQuantity;

    const minimumComment = product.minimumcomment || '';

    let displayPriceInPopup;
    if (product.price === "N/A" || product.price === null || product.price === undefined || product.price === 0) {
        displayPriceInPopup = "N/A";
    } else if (product.type === "bag") {
        displayPriceInPopup = product.price.toLocaleString();
    } else {
        displayPriceInPopup = product.price.toLocaleString();
    }

    content.innerHTML = `<div class="popup-box-show">
                <div class="popup-left">
                  <div class="popup-left-boximg">
                    <div>
                      <img id="mainPopupImg" src="/assets/images/products/${images[0] || ''}" alt="‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ${product.name}" style="cursor: zoom-in;">
                    </div>
                    <div>
                      <div class="popup-thumbnails" >
                        ${thumbnailsHTML}
                      </div>
                    </div>
                  </div>

                  <div class="popup-left-box">
                    <div class="popup-left-box-con">
                      <div class="p-l-b-standard">
                        <div class="p-l-b-s-title">
                          <p >‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏°</p><hr>
                        </div>
                        <div class="plbs-con">
                          <div class="plbs-box">
                            <a href="#">
                              <img src="/assets/images/products/${product.standardImg1 || ''}" alt="">
                            </a>
                            <div class="popup-standard-logo-detail">
                              <p>${product.standard1 || ''}</p>
                            </div>
                          </div>

                          <div class="plbs-box">
                            <a href="#">
                              <img src="/assets/images/products/${product.standardImg2 || ''}" alt="">
                            </a>
                            <div class="popup-standard-logo-detail">
                              <p>${product.standard2 || ''}</p>
                            </div>
                          </div>
                        </div>
                      </div>

                      <div class="p-l-b-standard">
                        <div class="p-l-b-s-title">
                          <p>‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥</p><hr>
                        </div>
                        <div class="plbs-con">
                          <p>
                            ${product.feature || ''}
                          </p>
                        </div>
                      </div>

                      <div class="p-l-b-strength">
                        <div class="p-l-b-s-title">
                          <p >‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏•‡∏¥‡∏ï‡∏†‡∏±‡∏ì‡∏ë‡πå</p><hr>
                        </div>
                        <div class="plbs-con">
                          <div>
                            <p>
                              ${product.detail || ''}
                            </p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="popup-right">
                    <div class="popup-add-v-detail">
                      <h2>${product.name} ‡∏Ç‡∏ô‡∏≤‡∏î ${product.weight || ''}</h2>
                      <p style="color:#555; font-size: 1.3rem;">${product.description || ''} ${product.typeWork || ''}</p>
                      <div class="popup-right-price">
                        <p class="popup-right-price-r"><strong>‡∏£‡∏≤‡∏Ñ‡∏≤:</strong> ${displayPriceInPopup} ‡∏ö‡∏≤‡∏ó/${product.unit || ''}</p>
                        <p><strong>‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏î‡∏™‡πà‡∏á:</strong> ${
                            product.province || ''
                        }, ${product.district || ''}</p>
                      </div>
                    </div>

                    <div class="popup-content">
                        <h4>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h4>
                        <div class="stepper">
                          <label for="qtyInput">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:</label>
                          <div class="stepper-controls">
                            <button type="button" class="decrease">‚àí</button>
                            <input id="qtyInput" type="number" min="${minQuantity}" value="${initialQuantity}" />
                            <button type="button" class="increase">+</button>
                          </div>
                          <p class="note">${minimumComment}</p>
                        </div>
                    </div>

                    <div class="popup-action-buttons" style="display:flex; gap:15px; margin-top:20px;">
                      <button class="popup-add-cart-btn"><i class="fa-solid fa-cart-arrow-down"></i> ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</button>
                      <button class="popup-buy-now-btn"> ‡∏ã‡∏∑‡πâ‡∏≠‡∏ä‡∏¥‡πâ‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß</button>
                    </div>
                </div>

                <div class="popup-close">
                    <button class="popup-close-btn" onclick="closeProductPopup()">√ó</button>
                </div>
                <div class="mobile-popup-close">
                    <button style="
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        gap: 8px;
                        margin-top: 20px;
                        background-color: white; /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß */
                        color: #D60000; /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡πÅ‡∏î‡∏á */
                        border: 2px solid #D60000; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏™‡πâ‡∏ô‡∏Ç‡∏≠‡∏ö‡∏™‡∏µ‡πÅ‡∏î‡∏á 2px */
                        padding: 10px 20px;
                        border-radius: 8px;
                        font-size: 16px;
                        cursor: pointer;
                        transition: all 0.3s ease; /* ‡πÉ‡∏ä‡πâ transition ‡∏Å‡∏±‡∏ö 'all' ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏•‡∏∏‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÜ */
                        width: 100%;
                        box-sizing: border-box;
                    " class="popup-close-btn" onclick="closeProductPopup()">
                        <i class="fa-solid fa-times"></i> ‡∏õ‡∏¥‡∏î
                    </button>
                </div>
            </div>`;

    popup.classList.remove("hidden");

    // **‡πÄ‡∏û‡∏¥‡πà‡∏° Event Listener ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏´‡∏•‡∏±‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ã‡∏π‡∏°**
    const mainPopupImg = document.getElementById('mainPopupImg');
    if (mainPopupImg) {
        mainPopupImg.addEventListener('click', () => {
            openImageZoomPopup(mainPopupImg.src);
        });
    }

    const qtyInput = document.getElementById("qtyInput");
    const btnIncrease = popup.querySelector(".increase");
    const btnDecrease = popup.querySelector(".decrease");
    const btnAddToCart = popup.querySelector(".popup-add-cart-btn");
    const btnBuyNow = popup.querySelector(".popup-buy-now-btn");

    if (btnIncrease && btnDecrease && qtyInput) {
        btnIncrease.onclick = () => {
            qtyInput.value = parseInt(qtyInput.value) + 1;
        };

        btnDecrease.onclick = () => {
            const currentVal = parseInt(qtyInput.value);
            if (currentVal > minQuantity) {
                qtyInput.value = currentVal - 1;
            } else {
                qtyInput.value = minQuantity;
                Swal.fire({
                    icon: "warning",
                    title: "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥",
                    text: `‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ô‡∏µ‡πâ (${product.name}) ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥‡∏Ñ‡∏∑‡∏≠ ${minQuantity} ${product.unit || '‡∏ä‡∏¥‡πâ‡∏ô'}.`,
                    confirmButtonText: "‡∏ï‡∏Å‡∏•‡∏á",
                    confirmButtonColor: "#e74c3c",
                });
            }
        };

        qtyInput.addEventListener("change", () => {
            let currentVal = parseInt(qtyInput.value);

            if (isNaN(currentVal) || currentVal < minQuantity) {
                qtyInput.value = minQuantity;
                Swal.fire({
                    icon: "warning",
                    title: "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥",
                    text: `‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ô‡∏µ‡πâ (${product.name}) ‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏±‡πà‡∏á‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥ ${minQuantity} ${product.unit || '‡∏ä‡∏¥‡πâ‡∏ô'}.`,
                    confirmButtonText: "‡∏ï‡∏Å‡∏•‡∏á",
                    confirmButtonColor: "#e74c3c",
                });
            }
        });

        qtyInput.addEventListener("input", () => {
            let currentVal = parseInt(qtyInput.value);
            if (isNaN(currentVal) || currentVal < minQuantity) {
                // ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏™‡∏î‡∏á Swal.fire ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡∏ã‡πâ‡∏≥ ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ô 'change' event ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°
            }
        });
    }

    if (btnAddToCart) {
        btnAddToCart.addEventListener('click', () => {
            const quantity = parseInt(qtyInput.value);
            if (quantity < minQuantity) {
                qtyInput.value = minQuantity;
                Swal.fire({
                    icon: "warning",
                    title: "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á",
                    text: `‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡πâ‡∏≠‡∏ô (${quantity}) ‡πÑ‡∏°‡πà‡∏ñ‡∏∂‡∏á‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥ (${minQuantity}) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ô‡∏µ‡πâ (${product.name}). ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô ${minQuantity}.`,
                    confirmButtonText: "‡∏ï‡∏Å‡∏•‡∏á",
                    confirmButtonColor: "#e74c3c",
                });
                return;
            }

            if (product.price === "N/A" || product.price === null || product.price === undefined || product.price === 0) {
                Swal.fire({
                    icon: "error",
                    title: "‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ",
                    text: `‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ô‡∏µ‡πâ ${product.name} ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏•‡∏∑‡∏≠‡∏Å.`,
                    confirmButtonText: "‡∏ï‡∏Å‡∏•‡∏á",
                    confirmButtonColor: "#e74c3c",
                }).then((result) => {
                    if (result.isConfirmed) {
                        filterProducts(); // ‡∏ñ‡πâ‡∏≤‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà
                        closeProductPopup();
                    }
                });
            } else {
                addToCart(product, quantity); // ‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô addToCart ‡∏ñ‡∏π‡∏Å‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÑ‡∏ß‡πâ
                closeProductPopup();
            }
        });
    }

    if (btnBuyNow) {
        btnBuyNow.addEventListener('click', () => {
            const quantity = parseInt(qtyInput.value);
            if (quantity < minQuantity) {
                qtyInput.value = minQuantity;
                Swal.fire({
                    icon: "warning",
                    title: "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á",
                    text: `‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡πâ‡∏≠‡∏ô (${quantity}) ‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥ (${minQuantity}) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ô‡∏µ‡πâ (${product.name}). ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô ${minQuantity}.`,
                    confirmButtonText: "‡∏ï‡∏Å‡∏•‡∏á",
                    confirmButtonColor: "#e74c3c",
                });
                return;
            }

            if (product.price === "N/A" || product.price === null || product.price === undefined || product.price === 0) {
                Swal.fire({
                    icon: "error",
                    title: "‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡πÑ‡∏î‡πâ",
                    text: `‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ô‡∏µ‡πâ ${product.name} ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏•‡∏∑‡∏≠‡∏Å.`,
                    confirmButtonText: "‡∏ï‡∏Å‡∏•‡∏á",
                    confirmButtonColor: "#e74c3c",
                }).then((result) => {
                    if (result.isConfirmed) {
                        filterProducts(); // ‡∏ñ‡πâ‡∏≤‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà
                        closeProductPopup();
                    }
                });
            } else {
                const itemToBuy = {
                    ...product,
                    quantity: quantity
                };
                localStorage.setItem('buyNowItem', JSON.stringify(itemToBuy));

                window.location.href = '/pages/products/checkout.html';
            }
        });
    }
}

function openImageZoomPopup(imageSrc) {
    const imageZoomPopup = document.getElementById('imageZoomPopup');
    const zoomedImage = document.getElementById('zoomed-image');
    
    zoomedImage.src = imageSrc; 
    imageZoomPopup.classList.add('is-visible');

    document.body.classList.add('no-scroll'); 
}

function closeImageZoomPopup() {
    const imageZoomPopup = document.getElementById('imageZoomPopup');
    imageZoomPopup.classList.remove('is-visible'); 
    
    const productDetailPopup = document.getElementById('productDetailPopup');
    if (productDetailPopup.classList.contains('hidden')) { 
        document.body.classList.remove('no-scroll');
    }
}

document.addEventListener('keydown', (event) => {
    const productDetailPopup = document.getElementById('productDetailPopup');
    const imageZoomPopup = document.getElementById('imageZoomPopup');
    
    if (event.key === 'Escape' || event.key === 'Esc') {
        if (imageZoomPopup.classList.contains('is-visible')) {
            closeImageZoomPopup();
        } 
        else if (!productDetailPopup.classList.contains('hidden')) { 
            closeProductPopup();
        }
    }
});

function closeProductPopup() {
    document.getElementById("productDetailPopup").classList.add("hidden");
    
    const imageZoomPopup = document.getElementById('imageZoomPopup');
    if (!imageZoomPopup.classList.contains('is-visible')) {
        document.body.classList.remove('no-scroll');
    }
}

function changeQty(index, delta) {
    const item = cart[index];
    const newQty = item.qty + delta;
    const minQuantityForItem = item.type === "bag" ? 640 : (parseInt(item.minimum) || 1); // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ

    if (newQty >= minQuantityForItem) {
        item.qty = newQty;
    } else {
        Swal.fire({
            icon: "warning",
            title: "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥",
            text: `‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ${item.name} ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥‡∏Ñ‡∏∑‡∏≠ ${minQuantityForItem} ${item.unit || '‡∏ä‡∏¥‡πâ‡∏ô'}.`,
            confirmButtonText: "‡∏ï‡∏Å‡∏•‡∏á",
            confirmButtonColor: "#e74c3c",
        });
    }
    updateCartUI();
    localStorage.setItem("currentCart", JSON.stringify(cart));
}

function removeFromCart(index) {
    cart.splice(index, 1);
    updateCartUI();
    localStorage.setItem("currentCart", JSON.stringify(cart));
}

function updateCartUI() {

    const cartItemsEl = document.getElementById("cartItems");
    const cartSummaryEl = document.getElementById("cartSummary");
    const checkoutBtn = document.querySelector("#cartSummary button");
    const provinceFilter = document.getElementById("provinceFilter");
    const districtFilter = document.getElementById("districtFilter");
    const searchButton = document.querySelector('.pro-s-filter-bar button[onclick="filterProducts()"]');

    const selectedProvince = provinceFilter ? provinceFilter.value : "‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å";
    const selectedDistrict = districtFilter ? districtFilter.value : "‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å";

    const deliveryAreaText = (selectedProvince && selectedDistrict) &&
                             (selectedProvince !== "" && selectedDistrict !== "") ?
                             `${selectedProvince}, ${selectedDistrict}` : "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏î‡∏™‡πà‡∏á";

    if (cart.length > 0) {
        if (provinceFilter) provinceFilter.disabled = true;
        if (districtFilter) districtFilter.disabled = true;
        if (searchButton) searchButton.disabled = true;
    } else {
        if (provinceFilter) provinceFilter.disabled = false;
        if (districtFilter) districtFilter.disabled = false;
        if (searchButton) searchButton.disabled = false;
    }

    updateCartItemCount();
    localStorage.setItem("currentCart", JSON.stringify(cart));

    cartItemsEl.innerHTML = "";
    let totalIncludingVatFromItems = 0;

    if (cart.length === 0) {
        cartItemsEl.innerHTML = `<div class="empty-cart-state"><i class="fas fa-shopping-basket" style="font-size: 3rem; color: #ccc; margin-bottom: 15px;"></i><p>‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p><a href="/pages/products/products_showall.html" class="back-to-shop-btn">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</a></div>`;
        cartSummaryEl.innerHTML = `
            <div><p style="font-size: 15px; color: #988383;" >‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏î‡∏™‡πà‡∏á: ${deliveryAreaText}</p></div>
            <p>‡∏¢‡∏≠‡∏î‡∏™‡∏∏‡∏ó‡∏ò‡∏¥ (‡πÑ‡∏°‡πà‡∏£‡∏ß‡∏° VAT): 0 ‡∏ö‡∏≤‡∏ó</p>
            <p><strong>‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ß‡∏°: 0 ‡∏ö‡∏≤‡∏ó</strong></p>
            <button disabled>‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</button>
        `;
        updateCartItemCount();
        return;
    }

    cart.forEach((item, index) => {
        const itemEl = document.createElement("div");
        itemEl.className = "cart-item";
        itemEl.innerHTML = `
            <div class="cart-item-horizontal">
                
                <div class="cart-img">
                    <img src="/assets/images/products/${item.image}" alt="${item.name}">
                </div>

                <div class="cart-info">
                    <div class="cart-name">${item.name}</div>
                    <div class="cart-price">‡∏£‡∏≤‡∏Ñ‡∏≤: ${parseFloat(item.price).toLocaleString()} ‡∏ö‡∏≤‡∏ó</div>
                    <div class="qty-control">
                        <button onclick="changeQty(${index}, -1)">-</button>
                        <span>${item.qty}</span>
                        <button onclick="changeQty(${index}, 1)">+</button>
                    </div>
                </div>

                <div class="cart-remove">
                    <button onclick="removeFromCart(${index})">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                </div>
            </div>`;
        cartItemsEl.appendChild(itemEl);
        totalIncludingVatFromItems += (parseFloat(item.price) || 0) * item.qty;
    });

    const totalExcludingVat = totalIncludingVatFromItems / 1.07;
    const vatAmount = totalIncludingVatFromItems - totalExcludingVat;

    cartSummaryEl.innerHTML = `
        <div><p style="font-size: 15px; color: #988383;" >‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏î‡∏™‡πà‡∏á: ${deliveryAreaText}</p></div>
        <p>‡∏¢‡∏≠‡∏î‡∏™‡∏∏‡∏ó‡∏ò‡∏¥ (‡πÑ‡∏°‡πà‡∏£‡∏ß‡∏° VAT): ${totalExcludingVat.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })} ‡∏ö‡∏≤‡∏ó</p>
        <p><strong>‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ß‡∏°: ${totalIncludingVatFromItems.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })} ‡∏ö‡∏≤‡∏ó</strong></p>
        <button onclick="checkoutCart()">‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</button>
    `;

    if (checkoutBtn) {
        checkoutBtn.disabled = false;
    }

    updateCartItemCount();
    localStorage.setItem("currentCart", JSON.stringify(cart));
}

function checkoutCart() {
    localStorage.setItem("checkoutCartItems", JSON.stringify(cart));
    
    localStorage.removeItem("buyNowItem"); 

    cart = [];
    localStorage.removeItem("currentCart");
    updateCartUI();

    window.location.href = "/pages/products/checkout.html";
}

function addToCart(productData, quantityToAddFromPopup) {
    const province = document.getElementById("provinceFilter").value;
    const district = document.getElementById("districtFilter").value;
  
    if (!province || !district) {
        Swal.fire({
            icon: "warning",
            title: "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏Å‡πà‡∏≠‡∏ô",
            text: "‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡πÅ‡∏•‡∏∞‡∏≠‡∏≥‡πÄ‡∏†‡∏≠‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤",
            confirmButtonText: "‡∏ï‡∏Å‡∏•‡∏á",
            confirmButtonColor: "#e74c3c",
        });
        return;
    }

    const minQuantityForProduct = productData.type === "bag" ? 640 : (parseInt(productData.minimum) || 1);

    let finalQuantityToAdd;

    if (quantityToAddFromPopup !== undefined && !isNaN(parseInt(quantityToAddFromPopup))) {
        finalQuantityToAdd = parseInt(quantityToAddFromPopup);
        if (finalQuantityToAdd < minQuantityForProduct) {
            finalQuantityToAdd = minQuantityForProduct;
            console.warn(`Quantity adjusted to minimum from popup input. Original: ${quantityToAddFromPopup}, Adjusted: ${finalQuantityToAdd}`);
        }
    } else {
        finalQuantityToAdd = minQuantityForProduct;
        console.log(`Using default/minimum quantity for product: ${productData.name}, Quantity: ${finalQuantityToAdd}`);
    }

    const existing = cart.find((item) => item.id === productData.id);
    if (existing) {
        existing.qty += finalQuantityToAdd;
    } else {
        cart.push({ ...productData, qty: finalQuantityToAdd, province: province, district: district });
    }

    updateCartUI();

    
    
    showCart();
}

function addToCartWithQty(product, qty) {
    const province = document.getElementById("provinceFilter").value;
    const district = document.getElementById("districtFilter").value;

    if (!province || !district) {
        Swal.fire({
            icon: "warning",
            title: "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏î‡∏™‡πà‡∏á",
            text: "‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡πÅ‡∏•‡∏∞‡∏≠‡∏≥‡πÄ‡∏†‡∏≠‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤",
            confirmButtonText: "‡∏ï‡∏Å‡∏•‡∏á",
            confirmButtonColor: "#e74c3c",
        });
        return;
    }

    let parsedQty = parseInt(qty);
    const minQuantity = product.type === "bag" ? 640 : (parseInt(product.minimum) || 1);

    if (isNaN(parsedQty) || parsedQty < minQuantity) {
        Swal.fire({
            icon: "warning",
            title: "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á",
            text: `‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ${product.name} ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥‡∏Ñ‡∏∑‡∏≠ ${minQuantity} ${product.unit || '‡∏ä‡∏¥‡πâ‡∏ô'}.`,
            confirmButtonText: "‡∏ï‡∏Å‡∏•‡∏á",
            confirmButtonColor: "#e74c3c",
        });
        return;
    }

    const existing = cart.find((item) => item.id === product.id);
    if (existing) {
        existing.qty += parsedQty;
    } else {
        cart.push({ ...product, qty: parsedQty });
    }

    updateCartUI();

    showCart();

    Swal.fire({
        icon: 'success',
        title: '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡πÅ‡∏•‡πâ‡∏ß',
        showConfirmButton: false,
        timer: 1500
    });
}

function buyNowWithQty(product, qty) {
    const province = document.getElementById("provinceFilter").value;
    const district = document.getElementById("districtFilter").value;

    if (!province || !district) {
        Swal.fire({
            icon: "warning",
            title: "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏î‡∏™‡πà‡∏á",
            text: "‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡πÅ‡∏•‡∏∞‡∏≠‡∏≥‡πÄ‡∏†‡∏≠‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£",
            confirmButtonText: "‡∏ï‡∏Å‡∏•‡∏á",
            confirmButtonColor: "#e74c3c",
        });
        return;
    }

    let parsedQty = parseInt(qty);
    const minQuantity = product.type === "bag" ? 640 : (parseInt(product.minimum) || 1);

    if (isNaN(parsedQty) || parsedQty < minQuantity) {
        Swal.fire({
            icon: "warning",
            title: "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á",
            text: `‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ${product.name} ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥‡∏Ñ‡∏∑‡∏≠ ${minQuantity} ${product.unit || '‡∏ä‡∏¥‡πâ‡∏ô'}.`,
            confirmButtonText: "‡∏ï‡∏Å‡∏•‡∏á",
            confirmButtonColor: "#e74c3c",
        });
        return;
    }

    const itemToBuy = {
        ...product,
        quantity: parsedQty, // ‡πÉ‡∏ä‡πâ 'quantity' ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≠‡∏î‡∏Ñ‡∏•‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö checkout.html ‡∏ó‡∏µ‡πà‡∏≠‡πà‡∏≤‡∏ô‡∏à‡∏≤‡∏Å 'quantity'
        province: province, // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î
        district: district  // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏≥‡πÄ‡∏†‡∏≠
    };

    // **‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç**: ‡∏•‡∏ö checkoutCartItems ‡∏≠‡∏≠‡∏Å ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏´‡∏ô‡πâ‡∏≤ checkout ‡∏à‡∏∞‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡πÄ‡∏Å‡πà‡∏≤
    localStorage.removeItem("checkoutCartItems"); 
    localStorage.setItem('buyNowItem', JSON.stringify(itemToBuy));

    window.location.href = "/pages/products/checkout.html";
}



function filterProducts() {
    const searchInput = document.getElementById("searchInput").value.toLowerCase();
    const province = document.getElementById("provinceFilter").value;
    const district = document.getElementById("districtFilter").value;

    if (!province || !district) {
        renderCards(allData.products, null, null); // ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏´‡∏≤‡∏Å‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà
        return;
    }

    localStorage.setItem(
        "filterState",
        JSON.stringify({
            province,
            district,
            searchInput,
            currentType,
        })
    );

    const priceData = allData.prices?.[province]?.[district];

    if (!priceData) {
        document.getElementById("productGrid").innerHTML =
            "<p>‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πâ</p>"; // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô "‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≤‡∏Ñ‡∏≤"
        return;
    }

    const filteredProducts = allData.products.filter((p) => {
        const text = `${p.name} ${p.description}`.toLowerCase();
        return (
            (!searchInput || text.includes(searchInput)) &&
            (currentType === "all" || p.type === currentType)
        );
    });

    document.getElementById("productGrid").scrollIntoView({
        behavior: "smooth",
    });

    renderCards(filteredProducts, priceData, {
        province,
        district,
    });
}

function formatPrice(price) {
    if (typeof price !== 'number' || isNaN(price)) {
        return price;
    }

    if (price === 0) {
        return "0 ‡∏ö‡∏≤‡∏ó";
    }

    if (price < 1000000) {
        return price.toLocaleString() + " ‡∏ö‡∏≤‡∏ó";
    }
    else {
        const millions = price / 1000000;
        const formattedMillions = parseFloat(millions.toFixed(1));
        return `${formattedMillions} ‡∏•‡πâ‡∏≤‡∏ô‡∏ö‡∏≤‡∏ó`;
    }
}

function renderCards(products, priceData, areaInfo) {
    const grid = document.getElementById("productGrid");
    grid.innerHTML = "";

    if (!products || products.length === 0) {
        grid.innerHTML = `<p style="padding: 20px; font-size: 5rem; color: #c62828;">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡∏ó‡πà‡∏≤‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</p>`;
        return;
    }

    products.forEach((product) => {

        const price = priceData && priceData[product.id] !== undefined ? priceData[product.id] : "N/A";

        const productData = {
            ...product,
            price: price !== "N/A" ? parseFloat(price) : 0,
            province: areaInfo?.province || "",
            district: areaInfo?.district || "",
        };

        let priceDisplayText = '';
        let priceVisibilityClass = '';

        if (productData.price !== 0) {
            if (product.type === "bag") {
                priceDisplayText = `<strong>${formatPrice(productData.price)}/${product.unit || ''}</strong>`;
            } else {
                priceDisplayText = `<strong> ${formatPrice(productData.price)}/${product.unit || ''}</strong>`;
            }
        } else {
            priceDisplayText = `<strong>N/A ‡∏ö‡∏≤‡∏ó/${product.unit || ''}</strong>`;
            priceVisibilityClass = 'hide-na-price-text';
        }

        const card = document.createElement("div");
        card.className = "p-c-product-card";
        card.innerHTML = `<img src="/assets/images/products/${
                product.image || ''
            }" alt="${product.name}">
                        <div class="p-c-product-info">
                            <div class="pcpi-box">
                                <div class="p-c-product-title"><p>${product.name}</p></div>
                                <div class="pcpd-box">
                                  <div class="p-c-product-detail"><p>${product.description || ''}</p></div>
                                  <div class="p-c-product-detail"><p>${product.typeWork || ''}</p></div>
                                </div>
                                <div class="p-c-product-price">
                                    <p class="${priceVisibilityClass} ">‡∏£‡∏≤‡∏Ñ‡∏≤: <span> ${priceDisplayText} </span></p>
                                    <p class="p-c-product-value">( ‡∏ö‡∏£‡∏£‡∏à‡∏∏ ${product.weight}/${product.unit} )</p>
                                </div>
                                <div class="m-p-c-product-price">
                                    <p class="${priceVisibilityClass} "><span>‡∏ø ${priceDisplayText} </span></p>
                                    <p class="m-p-c-product-value">( ‡∏ö‡∏£‡∏£‡∏à‡∏∏ ${product.weight}/${product.unit} )</p>
                                </div>
                                <div>
                                </div>

                                <div class="p-c-product-area">
                                    <div><p >‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏î‡∏™‡πà‡∏á: ${productData.province}, ${productData.district}</p></div>
                                </div>
                                <div class="m-p-c-product-area">
                                    <div><p > ${productData.province}, ${productData.district}</p></div>
                                </div>

                            </div>
                            <div style="display: flex; flex-direction: column; gap: 0.5rem;">
                                <button class="p-c-buy-btn" onclick='showProductPopup(${JSON.stringify(productData)})'><i class="fa-solid fa-magnifying-glass"></i> ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</button>
                                <button class="p-c-add-cart-btn"><i class="fa-solid fa-cart-arrow-down"></i> ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</button>
                            </div>
                        </div>
            `;
        card.querySelector(".p-c-add-cart-btn").addEventListener("click", () => {
            if (productData.price === 0) {
                Swal.fire({
                    icon: "error",
                    title: "‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ",
                    text: `‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ô‡∏µ‡πâ ${product.name} ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏•‡∏∑‡∏≠‡∏Å. ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡πÅ‡∏•‡∏∞‡∏≠‡∏≥‡πÄ‡∏†‡∏≠‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏•‡∏∞‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠.`,
                    confirmButtonText: "‡∏ï‡∏Å‡∏•‡∏á",
                    confirmButtonColor: "#e74c3c",
                }).then((result) => {
                    if (result.isConfirmed) {
                        filterProducts();
                    }
                });
            } else {
                addToCart(productData);
            }
        });

        grid.appendChild(card);
    });
}




// =============== SWITCH TYPE =================================
window.switchType = function (el, type) {
    currentType = type;
    document
        .querySelectorAll(".pro-s-pd-type")
        .forEach((tab) => tab.classList.remove("active"));
    document.querySelectorAll(".pro-s-pd-adv-type").forEach((tab) => tab.classList.remove("active")); // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Å‡∏±‡∏ö adv-type ‡∏î‡πâ‡∏ß‡∏¢

    if (el) { 
        el.classList.add("active");
    }

    const otherTypeTabs = document.querySelectorAll(`.pro-s-pd-type[onclick*="'${type}'"]`);
    const otherAdvTypeTabs = document.querySelectorAll(`.pro-s-pd-adv-type[onclick*="'${type}'"]`);

    otherTypeTabs.forEach(tab => tab.classList.add('active'));
    otherAdvTypeTabs.forEach(tab => tab.classList.add('active'));


    if (allData) { 
        filterProducts();
    }
}

// =============== ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Products ‡πÅ‡∏•‡∏∞ Prices ===================
async function fetchData() {
    try {
        const [datasResponse, areaResponse] = await Promise.all([
            fetch("/poon-singto-datas.json"), 
            fetch("/poon-singto-area.json")  
        ]);

        const datas = await datasResponse.json();
        const areaDataArray = await areaResponse.json(); 

        const provinces = areaDataArray.map(item => item.province);
        const districts = {};
        areaDataArray.forEach(item => {
            districts[item.province] = item.districts;
        });

        allData = {
            products: datas.products,
            prices: datas.prices,
            provinces: provinces,
            districts: districts
        };
        console.log("Data loaded and structured:", allData);

    } catch (error) {
        console.error("Error loading data:", error);
        document.getElementById("productGrid").innerHTML = `<p style="padding: 20px; font-size: 5rem; color: #c62828;">‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</p>`;
    }
}

// =============== ‡πÇ‡∏´‡∏•‡∏î‡∏≠‡∏≥‡πÄ‡∏†‡∏≠‡∏ï‡∏≤‡∏°‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å =====================
function loadDistricts(selectedProvince) {
    const districtFilter = document.getElementById("districtFilter");
    districtFilter.innerHTML = '<option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏≥‡πÄ‡∏†‡∏≠/‡πÄ‡∏Ç‡∏ï</option>'; 

    if (selectedProvince && allData && allData.districts && allData.districts[selectedProvince]) {
        allData.districts[selectedProvince].forEach(district => {
            const option = document.createElement("option");
            option.value = district;
            option.textContent = district;
            districtFilter.appendChild(option);
        });
    }
}



// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡πà‡∏ô Pop Up ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£ ==================================================
document.getElementById("toggleTipsBtn").addEventListener("click", function () {
  const howToUse = document.querySelector(".pro-s-how-to-use-search");
  howToUse.classList.toggle("pro-s-hidden");
});
// =========================================================================






// <!-- /navigationJS -->
document.addEventListener('DOMContentLoaded', function() {
        const hamburgerMenu = document.querySelector('.hamburger-menu');
        const navList = document.querySelector('.nav-list');
        const mainNavContainer = document.querySelector('.NavOfPoonSingtoolayout'); // Get the main container

        hamburgerMenu.addEventListener('click', function() {
            hamburgerMenu.classList.toggle('active');
            navList.classList.toggle('active');
            // Optional: Toggle a class on the main container to adjust height/background if needed when menu is open
            // mainNavContainer.classList.toggle('menu-open'); 
        });

        // Optional: Close menu when a link is clicked (good for UX on mobile)
        navList.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', () => {
                // Only close if it's a mobile view (or if you want it to close on all clicks)
                if (window.innerWidth <= 768) { 
                    hamburgerMenu.classList.remove('active');
                    navList.classList.remove('active');
                    // mainNavContainer.classList.remove('menu-open');
                }
            });
        });

        // Optional: Close menu if window is resized above mobile breakpoint
        window.addEventListener('resize', () => {
            if (window.innerWidth > 768) {
                hamburgerMenu.classList.remove('active');
                navList.classList.remove('active');
                // mainNavContainer.classList.remove('menu-open');
            }
        });

        // Optional: Handle dropdowns for mobile if they are needed
        // For mobile dropdowns, you would typically toggle a class on click instead of hover
        const dropdownToggles = document.querySelectorAll('.dropdown > a');
        dropdownToggles.forEach(toggle => {
            toggle.addEventListener('click', function(event) {
                if (window.innerWidth <= 768) {
                    event.preventDefault(); // Prevent default link behavior
                    const dropdownMenu = this.nextElementSibling;
                    if (dropdownMenu && dropdownMenu.classList.contains('dropdown-menu')) {
                        // Close other open dropdowns
                        document.querySelectorAll('.dropdown-menu.active').forEach(menu => {
                            if (menu !== dropdownMenu) {
                                menu.classList.remove('active');
                            }
                        });
                        dropdownMenu.classList.toggle('active'); // Toggle visibility
                    }
                }
            });
        });
    });

</script>




</body>
</html>