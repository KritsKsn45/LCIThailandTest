<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
    <meta charset="UTF-8">
    <meta name="description" content="ปูนสิงโต - จำหน่ายปูนคุณภาพสำหรับทุกงานก่อสร้าง">
    <meta property="og:title" content="ผลิตภัณฑ์-ปูนสิงโต - ปูนคุณภาพสำหรับทุกงานก่อสร้าง" />
    <meta property="og:description" content="ปูนสิงโต - จำหน่ายปูนคุณภาพสำหรับทุกงานก่อสร้าง ทั้งปูนโครงสร้าง ปูนฉาบ และปูนสำเร็จรูป" />
    <meta property="og:image" content="https://www.yourwebsite.com/assets/images/banners/productbanner1.jpg" />
    <meta property="og:url" content="https://www.yourwebsite.com/pages/products/products_showall.html" />
    <meta property="og:type" content="website" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ผลิตภัณฑ์-ปูนสิงโต</title>
    <link rel="icon" type="image/png" href="assets/icons/favicon.ico">
    <link rel="stylesheet" href="/css/product-poonsingto.css">

    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- Swiper CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <!-- Swiper JS -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>

</head>
<body>

<!-- base all website -->
<div id="preloader">
  <div class="cement-truck-animation">
    <img src="/assets/icons/lci-truck.gif" alt="">
    <div class="pouring"></div>
    <p>กำลังเทปูน กรุณารอสักครู่...</p>
  </div>
</div>








<!-- desktop view -->
<div class="desktop-product-show">

        <!-- product header -->
        <header class="ps-product-custom-header">
            <div class="ps-product-header-top">
                <h1 class="ps-product-lci">ผลิตภัณฑ์ปูนสิงโต</h1>
            </div>

            <!-- Navigation -->
            <div class="NavOfPoonSingtoolayout">
            <nav class="main-nav">
                <div class="nav-header-mobile-wrapper"> 
                    <div class="nav-lci-above-group1">
                        <a href="/">
                            <div class="nav-logoLCI">
                                <div class="nav-img-logoLCI">
                                </div>
                                <div class="nav-titlename-logoLCI">
                                    <h3>LCI-Thailand</h3>
                                </div>
                            </div>
                        </a>
                    </div>
                    <div class="hamburger-menu">
                        <div class="bar"></div>
                        <div class="bar"></div>
                        <div class="bar"></div>
                    </div>
                </div>

                <ul class="nav-list">
                    <li><a href="/index.html">หน้าแรก</a></li>
                    <li><a href="/pages/about.html">เกี่ยวกับเรา</a></li>
                    <li class="dropdown">
                        <a href="/pages/products/products_showall.html">ผลิตภัณฑ์</a>
                        </li>
                    <li><a href="/pages/marketing.html">ข่าวสาร</a></li>
                    <li><a href="/pages/howtoPays.html">วิธีสั่งซื้อ</a></li>
                    <li><a href="/pages/contact.html">ติดต่อเรา</a></li>
                </ul>
            </nav>
            </div>
            

            <!-- mobile search bar -->
            <div class="mobile-pro-s-filter-bar">
                                <!-- Title for mobile, hidden on desktop -->
                                <div class="mobile-psfb-title">
                                    <h3>ค้นหาสินค้า</h3>
                                </div>

                                <!-- Search Input Group -->
                                <div class="mobile-search-input-wrapper">
                                    <i class="fa-solid fa-magnifying-glass search-icon"></i>
                                    <input type="text" id="searchInput" placeholder="ค้นหาชื่อสินค้า...">
                                </div>

                                <!-- Location Filters Group -->
                                <div class="mobile-location-filters-wrapper">
                                    <select id="provinceFilter">
                                        <option value="">เลือกจังหวัด</option>
                                    </select>
                                    <select id="districtFilter" disabled>
                                        <option value="">เลือกอำเภอ</option>
                                    </select>
                                </div>

                                <!-- Search Button Group -->
                                <div class="mobile-search-button-wrapper">
                                    <button onclick="filterProducts()"><i class="fa-solid fa-magnifying-glass"></i> ค้นหา</button>
                                </div>
            </div>
            <!-- ----------------------------- -->

        </header>
        



        <main>


            <!-- Product -->
            <section class="pro-s-product-showcase pro-s-full-width"> 

                <!-- how to use -->
                <div>
                    <div>
                      <button id="toggleTipsBtn" class="info-button">
                        <i class="fas fa-info-circle"></i> 
                        <h3>กดเพื่ออ่านวิธีการใช้งาน*</h3>
                      </button>
                    </div>
                    <div class="pro-s-how-to-use-search pro-s-hidden">
                        <p style="font-weight: 600;">ขั้นตอน</p>
                        <ul>
                            <li>1. กรอกชื่อสินค้าที่ต้องการ หรือไม่ก็ได้</li>
                            <li>2. ต้องเลือกจังหวัดที่ต้องการก่อน ถึงจะสามารถเลือกอำเภอได้</li>
                            <li>3. เลือกอำเภอที่ต้องการ</li>
                            <li>4. กดปุ่ม "ค้นหา" เพื่อแสดงข้อมูล</li>
                        </ul>
                    </div>
                </div>           
                <!-- ----------------------------- -->
                
                <!-- product filter buy -->
                <div  class="product-all-con">

                    <!-- adv. container -->
                    <!-- <div class="pro-s-adv-filters-box">
                      
                      <div class="pro-s-adv-container">
                                                                  
                        <h3>ประเภท</h3>
                        <div>
                          <nav>
                              <ul class="pro-s-adv-product-type-tabs">
                                  <li class="pro-s-pd-adv-type active" onclick="switchType(this, 'all')">ทั้งหมด</li>
                                  <li class="pro-s-pd-adv-type" onclick="switchType(this, 'bag')" >แบบถุง</li>
                                  <li class="pro-s-pd-adv-type" onclick="switchType(this, 'truck')">แบบผง</li>
                              </ul>
                          </nav>
                        </div>

                        <h3>สินค้า</h3>
                        <div class="pro-s-adv-advanced-filters">
                          <div>
                            <label><input type="radio" name="mixeddang" id="ปูนสิงโตแดง"> ปูนสิงโตแดง</label>
                          </div>                        
                          <div>
                            <label><input type="radio" name="mixeddang" id="ปูนสิงโตเขียว"> ปูนสิงโตเขียว</label>
                          </div>
                        </div>
                 
                      </div>                   
                    </div> -->

                    <!-- product container -->
                    <div class="ps-product-container">

                       


                      <!-- filter type -->
                      <div class="pro-s-product-type-selector">
                          <h3>ประเภท</h3>
                          <nav>
                              <ul class="pro-s-product-type-tabs">
                                  <li class="pro-s-pd-type active" onclick="switchType(this, 'all')">ทั้งหมด</li>
                                  <li class="pro-s-pd-type" onclick="switchType(this, 'bag')" >แบบถุง</li>
                                  <li class="pro-s-pd-type" onclick="switchType(this, 'truck')">แบบผง</li>
                              </ul>
                          </nav>
                      </div>
                      <!-- ----------------------------- -->



                      <!-- Show product all -->               
                      <div id="productGrid" class="p-c-product-grid">
                        <!-- create card auto --> 
                      </div>
                      <!-- ----------------------------- -->
                
                    </div>
                      
                    <div>
                        <!-- Cart Slide-in Container -->
                        <div class="cart-section-container hidden" id="cartSection">
                            <div class="product-cart-tab">

                                <div class="p-cart-title">
                                <h3>รายการสินค้า</h3>
                                <button id="closeCartBtn" class="close-cart">✕</button>
                                </div>

                                <div class="products-carts-container">
                                <div id="cartItems">

                                </div>
                                </div>

                                <div class="p-cart-result">
                                    <div class="pcr-box">
                                        <div id="cartSummary">
                                            
                                        </div>
                                    </div>                        
                                </div>
                            </div>
                        </div>
                        
                        <!-- Cart button -->
                        <div style="position: fixed; bottom: 20px; right: 20px;  z-index: 5;">
                        <button id="openCartBtn" 
                            style="
                                position: fixed; 
                                bottom: 20px; 
                                right: 20px; 
                                background: linear-gradient(to right, #d70000, #8f0000);
                                color: white; 
                                padding: 15px 20px; 
                                border-radius: 50px; 
                                font-size: 1rem; 
                                border: none; 
                                box-shadow: 0 2px 10px rgba(0,0,0,0.2); 
                                z-index: 999; 
                                cursor: pointer; 
                                position: relative; /* สำหรับให้ span นับสินค้าจัดตำแหน่งได้ */
                                display: flex; /* จัดให้ไอคอนและข้อความอยู่ตรงกลาง */
                                align-items: center;
                                gap: 8px; /* ระยะห่างระหว่างไอคอนและข้อความ */
                            ">
                            <div class="desktop-cart-btn">
                                <i class="fa-solid fa-cart-plus"></i> ดูตะกร้า
                            </div>
                            <div class="mobile-cart-btn">
                                <i class="fa-solid fa-cart-plus"></i> 
                            </div>
                        <span id="cartItemCount" 
                            style="
                                position: absolute; 
                                top: -5px; 
                                right: -5px; 
                                background-color: #ffc107; 
                                color: #333; 
                                border-radius: 50%; 
                                padding: 5px 8px; 
                                font-size: 0.75rem; 
                                font-weight: bold; 
                                display: none; /* ซ่อนไว้ก่อน ถ้าไม่มีสินค้า */
                                min-width: 24px; /* กำหนดความกว้างขั้นต่ำเพื่อไม่ให้เล็กเกินไป */
                                text-align: center; /* จัดตัวเลขให้อยู่ตรงกลาง */
                                box-sizing: border-box; /* ให้ padding ไม่ดันขนาดออกไปนอก */
                            ">0</span>
                    </button>                 
                        </div>
                    </div>
                    
                    
                </div>               
                <!-- ----------------------------- -->
     
                
            </section>
            










            <section class="ps-p-how-it-works">
              <h2>สั่งซื้ออย่างไร?</h2>
              <div class="ps-p-steps">
                <div class="ps-p-step">
                  <div class="ps-p-step-icon">🛒</div>
                  <h3>เลือกสินค้า</h3>
                  <p>ค้นหาสินค้าที่คุณต้องการจากหลากหลายหมวดหมู่</p>
                </div>
                <div class="ps-p-step">
                  <div class="ps-p-step-icon">📦</div>
                  <h3>ยืนยันคำสั่งซื้อ</h3>
                  <p>ใส่ที่อยู่จัดส่งและเลือกวิธีการชำระเงิน</p>
                </div>
                <div class="ps-p-step">
                  <div class="ps-p-step-icon">🚚</div>
                  <h3>รอรับสินค้า</h3>
                  <p>เราจะจัดส่งสินค้ารวดเร็วถึงหน้าบ้านคุณ</p>
                </div>
              </div>
            </section>

            <section class="ps-p-benefits">
              <h2>ทำไมต้องเลือกเร?</h2>
              <ul class="ps-p-benefit-list">
                <li>🚚 ส่งฟรีทั่วประเทศ</li>
                <li>💳 เก็บเงินปลายทาง</li>
                <li>🛡️ รับประกันความพอใจ</li>
                <li>📞 บริการลูกค้า 24 ชม.</li>
              </ul>
            </section>

            <section class="ps-p-newsletter-subscribe">
              <h2>สมัครรับข่าวสาร</h2>
              <p>รับโปรโมชั่นและอัปเดตล่าสุดก่อนใคร</p>
              <form class="ps-p-subscribe-form">
                <input type="email" placeholder="กรอกอีเมลของคุณ" required />
                <button type="submit">สมัครเลย</button>
              </form>
            </section>

        </main>
</div>
    






<!-- pop up สินค้า -->
<div class="popup-product-detail hidden" id="productDetailPopup">
      <div class="popup-overlay" onclick="closeProductPopup()"></div>
      <div class="popup-box">
        <button class="popup-close" onclick="closeProductPopup()">×</button>
        <div id="popupProductContent"></div>
      </div>
</div>


<div class="image-zoom-popup" id="imageZoomPopup">
        <div class="image-zoom-content">
            <span class="image-zoom-close-button" onclick="closeImageZoomPopup()">&times;</span>
            <img id="zoomed-image" src="" alt="ภาพขยาย" class="zoomed-image">
        </div>
</div>




<!-- mobile view -->
<div class="mobile-product-show">


</div>
    


<!-- scripts area -->

<script>


// =============================================================
// =============== GLOBAL VARIABLES ============================

let allData = null;
let currentType = "all";
let cart = JSON.parse(localStorage.getItem("currentCart")) || [];
const cartSection = document.getElementById("cartSection");
const openCartBtn = document.getElementById("openCartBtn");
const closeCartBtn = document.getElementById("closeCartBtn");
const cartItemCountSpan = document.getElementById("cartItemCount");

document.addEventListener("DOMContentLoaded", async () => { 
    if (openCartBtn) {
        openCartBtn.addEventListener('click', toggleCartSection);
    }
    if (closeCartBtn) {
        closeCartBtn.addEventListener('click', toggleCartSection);
    }
    updateCartUI();

    // =============== PRELOADER ===================================
    const preloader = document.getElementById("preloader");
    if (preloader) {
        setTimeout(() => {
            preloader.style.opacity = '0';
            preloader.addEventListener('transitionend', () => {
                preloader.style.display = 'none';
            }, { once: true });
        }, 300);
    }
    // =============================================================

    // =============== โหลดข้อมูลและตรวจสอบค่าพื้นที่ที่บันทึกไว้ =================
    await fetchData();

    const provinceFilter = document.getElementById("provinceFilter");
    const districtFilter = document.getElementById("districtFilter");

    if (provinceFilter && districtFilter) {
        if (allData && allData.provinces) {
            allData.provinces.forEach(province => {
                const option = document.createElement("option");
                option.value = province;
                option.textContent = province;
                provinceFilter.appendChild(option);
            });
        }

        const storedFilterState = JSON.parse(localStorage.getItem("filterState"));
        if (storedFilterState && storedFilterState.province) {
            provinceFilter.value = storedFilterState.province;
            if (allData && allData.districts && allData.districts[storedFilterState.province]) {
                districtFilter.innerHTML = '<option value="">เลือกอำเภอ/เขต</option>';
                allData.districts[storedFilterState.province].forEach(district => {
                    const option = document.createElement("option");
                    option.value = district;
                    option.textContent = district;
                    districtFilter.appendChild(option);
                });
                districtFilter.value = storedFilterState.district || ""; // ตั้งค่าอำเภอ
            }
            filterProducts();
        } else {
            renderCards(allData.products, null, null);
        }

        provinceFilter.addEventListener("change", () => {
            loadDistricts(provinceFilter.value);
            filterProducts();
        });
        districtFilter.addEventListener("change", filterProducts); // เรียก filterProducts เมื่ออำเภอเปลี่ยน
    }
});

function toggleCartSection() {
    if (cartSection.classList.contains("hidden")) {
        cartSection.classList.remove("hidden");
        setTimeout(() => {
            cartSection.classList.add("show");
        }, 10);
    } else {
        cartSection.classList.remove("show");
        cartSection.addEventListener('transitionend', function handler() {
            cartSection.classList.add("hidden");
            cartSection.removeEventListener('transitionend', handler);
        });
    }
}

function showCart() {
    const cartEl = document.getElementById("cartSection");
    cartEl.classList.remove("hidden");
    setTimeout(() => {
        cartEl.classList.add("show");
    }, 10);
}

function hideCart() {
    const cartEl = document.getElementById("cartSection");
    cartEl.classList.remove("show");
    cartEl.addEventListener('transitionend', function handler() {
        cartEl.classList.add("hidden");
        cartEl.removeEventListener('transitionend', handler);
    });
}

function updateCartItemCount() {
    const uniqueItemCount = cart.length;

    if (uniqueItemCount > 0) {
        cartItemCountSpan.textContent = uniqueItemCount;
        cartItemCountSpan.style.display = "block";
    } else {
        cartItemCountSpan.style.display = "none";
    }
}



function showProductPopup(product) {
    const popup = document.getElementById("productDetailPopup");
    const content = document.getElementById("popupProductContent");

    document.body.classList.add('no-scroll');

    const images = [
        product.image,
        product.image1,
        product.image2,
        product.image3,
    ].filter((img, index, self) => img && self.indexOf(img) === index);

    const thumbnailsHTML = images
        .map(
            (img) =>
                `<img
                    src="/assets/images/products/${img}"
                    alt="รูปเพิ่มเติม"
                    style="width: 70px; height: 70px; border-radius: 6px; object-fit: cover; cursor: pointer; border: 2px solid #ddd;"
                    onclick="document.getElementById('mainPopupImg').src='/assets/images/products/${img}';"
                >`
        )
        .join("");

    const minQuantity = product.type === "bag" ? 640 : (parseInt(product.minimum) || 1);
    const initialQuantity = minQuantity;

    const minimumComment = product.minimumcomment || '';

    let displayPriceInPopup;
    if (product.price === "N/A" || product.price === null || product.price === undefined || product.price === 0) {
        displayPriceInPopup = "N/A";
    } else if (product.type === "bag") {
        displayPriceInPopup = product.price.toLocaleString();
    } else {
        displayPriceInPopup = product.price.toLocaleString();
    }

    content.innerHTML = `<div class="popup-box-show">
                <div class="popup-left">
                  <div class="popup-left-boximg">
                    <div>
                      <img id="mainPopupImg" src="/assets/images/products/${images[0] || ''}" alt="ตัวอย่างสินค้า ${product.name}" style="cursor: zoom-in;">
                    </div>
                    <div>
                      <div class="popup-thumbnails" >
                        ${thumbnailsHTML}
                      </div>
                    </div>
                  </div>

                  <div class="popup-left-box">
                    <div class="popup-left-box-con">
                      <div class="p-l-b-standard">
                        <div class="p-l-b-s-title">
                          <p >มาตรฐานอุตสาหกรรม</p><hr>
                        </div>
                        <div class="plbs-con">
                          <div class="plbs-box">
                            <a href="#">
                              <img src="/assets/images/products/${product.standardImg1 || ''}" alt="">
                            </a>
                            <div class="popup-standard-logo-detail">
                              <p>${product.standard1 || ''}</p>
                            </div>
                          </div>

                          <div class="plbs-box">
                            <a href="#">
                              <img src="/assets/images/products/${product.standardImg2 || ''}" alt="">
                            </a>
                            <div class="popup-standard-logo-detail">
                              <p>${product.standard2 || ''}</p>
                            </div>
                          </div>
                        </div>
                      </div>

                      <div class="p-l-b-standard">
                        <div class="p-l-b-s-title">
                          <p>คุณสมบัติ</p><hr>
                        </div>
                        <div class="plbs-con">
                          <p>
                            ${product.feature || ''}
                          </p>
                        </div>
                      </div>

                      <div class="p-l-b-strength">
                        <div class="p-l-b-s-title">
                          <p >ข้อมูลผลิตภัณฑ์</p><hr>
                        </div>
                        <div class="plbs-con">
                          <div>
                            <p>
                              ${product.detail || ''}
                            </p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="popup-right">
                    <div class="popup-add-v-detail">
                      <h2>${product.name} ขนาด ${product.weight || ''}</h2>
                      <p style="color:#555; font-size: 1.3rem;">${product.description || ''} ${product.typeWork || ''}</p>
                      <div class="popup-right-price">
                        <p class="popup-right-price-r"><strong>ราคา:</strong> ${displayPriceInPopup} บาท/${product.unit || ''}</p>
                        <p><strong>พื้นที่จัดส่ง:</strong> ${
                            product.province || ''
                        }, ${product.district || ''}</p>
                      </div>
                    </div>

                    <div class="popup-content">
                        <h4>เลือกจำนวนสินค้า</h4>
                        <div class="stepper">
                          <label for="qtyInput">จำนวน:</label>
                          <div class="stepper-controls">
                            <button type="button" class="decrease">−</button>
                            <input id="qtyInput" type="number" min="${minQuantity}" value="${initialQuantity}" />
                            <button type="button" class="increase">+</button>
                          </div>
                          <p class="note">${minimumComment}</p>
                        </div>
                    </div>

                    <div class="popup-action-buttons" style="display:flex; gap:15px; margin-top:20px;">
                      <button class="popup-add-cart-btn"><i class="fa-solid fa-cart-arrow-down"></i> เพิ่มลงตะกร้า</button>
                      <button class="popup-buy-now-btn"> ซื้อชิ้นเดียว</button>
                    </div>
                </div>

                <div class="popup-close">
                    <button class="popup-close-btn" onclick="closeProductPopup()">×</button>
                </div>
                <div class="mobile-popup-close">
                    <button style="
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        gap: 8px;
                        margin-top: 20px;
                        background-color: white; /* เปลี่ยนเป็นพื้นหลังสีขาว */
                        color: #D60000; /* เปลี่ยนสีข้อความเป็นสีแดง */
                        border: 2px solid #D60000; /* เพิ่มเส้นขอบสีแดง 2px */
                        padding: 10px 20px;
                        border-radius: 8px;
                        font-size: 16px;
                        cursor: pointer;
                        transition: all 0.3s ease; /* ใช้ transition กับ 'all' เพื่อให้ครอบคลุมการเปลี่ยนแปลงอื่นๆ */
                        width: 100%;
                        box-sizing: border-box;
                    " class="popup-close-btn" onclick="closeProductPopup()">
                        <i class="fa-solid fa-times"></i> ปิด
                    </button>
                </div>
            </div>`;

    popup.classList.remove("hidden");

    // **เพิ่ม Event Listener สำหรับรูปภาพหลักเพื่อซูม**
    const mainPopupImg = document.getElementById('mainPopupImg');
    if (mainPopupImg) {
        mainPopupImg.addEventListener('click', () => {
            openImageZoomPopup(mainPopupImg.src);
        });
    }

    const qtyInput = document.getElementById("qtyInput");
    const btnIncrease = popup.querySelector(".increase");
    const btnDecrease = popup.querySelector(".decrease");
    const btnAddToCart = popup.querySelector(".popup-add-cart-btn");
    const btnBuyNow = popup.querySelector(".popup-buy-now-btn");

    if (btnIncrease && btnDecrease && qtyInput) {
        btnIncrease.onclick = () => {
            qtyInput.value = parseInt(qtyInput.value) + 1;
        };

        btnDecrease.onclick = () => {
            const currentVal = parseInt(qtyInput.value);
            if (currentVal > minQuantity) {
                qtyInput.value = currentVal - 1;
            } else {
                qtyInput.value = minQuantity;
                Swal.fire({
                    icon: "warning",
                    title: "จำนวนสินค้าขั้นต่ำ",
                    text: `สำหรับสินค้านี้ (${product.name}) จำนวนขั้นต่ำคือ ${minQuantity} ${product.unit || 'ชิ้น'}.`,
                    confirmButtonText: "ตกลง",
                    confirmButtonColor: "#e74c3c",
                });
            }
        };

        qtyInput.addEventListener("change", () => {
            let currentVal = parseInt(qtyInput.value);

            if (isNaN(currentVal) || currentVal < minQuantity) {
                qtyInput.value = minQuantity;
                Swal.fire({
                    icon: "warning",
                    title: "จำนวนสินค้าขั้นต่ำ",
                    text: `สำหรับสินค้านี้ (${product.name}) ต้องสั่งขั้นต่ำ ${minQuantity} ${product.unit || 'ชิ้น'}.`,
                    confirmButtonText: "ตกลง",
                    confirmButtonColor: "#e74c3c",
                });
            }
        });

        qtyInput.addEventListener("input", () => {
            let currentVal = parseInt(qtyInput.value);
            if (isNaN(currentVal) || currentVal < minQuantity) {
                // ไม่ต้องแสดง Swal.fire ตรงนี้ซ้ำ เพราะจะถูกจัดการใน 'change' event หรือเมื่อกดปุ่ม
            }
        });
    }

    if (btnAddToCart) {
        btnAddToCart.addEventListener('click', () => {
            const quantity = parseInt(qtyInput.value);
            if (quantity < minQuantity) {
                qtyInput.value = minQuantity;
                Swal.fire({
                    icon: "warning",
                    title: "จำนวนสินค้าไม่ถูกต้อง",
                    text: `จำนวนที่ป้อน (${quantity}) ไม่ถึงขั้นต่ำ (${minQuantity}) สำหรับสินค้านี้ (${product.name}). ระบบจะปรับเป็น ${minQuantity}.`,
                    confirmButtonText: "ตกลง",
                    confirmButtonColor: "#e74c3c",
                });
                return;
            }

            if (product.price === "N/A" || product.price === null || product.price === undefined || product.price === 0) {
                Swal.fire({
                    icon: "error",
                    title: "ไม่สามารถเพิ่มสินค้าได้",
                    text: `สินค้านี้ ${product.name} ยังไม่มีข้อมูลราคาที่ถูกต้องสำหรับพื้นที่ที่คุณเลือก.`,
                    confirmButtonText: "ตกลง",
                    confirmButtonColor: "#e74c3c",
                }).then((result) => {
                    if (result.isConfirmed) {
                        filterProducts(); // ถ้าฟังก์ชันนี้มีอยู่
                        closeProductPopup();
                    }
                });
            } else {
                addToCart(product, quantity); // ต้องแน่ใจว่าฟังก์ชัน addToCart ถูกประกาศไว้
                closeProductPopup();
            }
        });
    }

    if (btnBuyNow) {
        btnBuyNow.addEventListener('click', () => {
            const quantity = parseInt(qtyInput.value);
            if (quantity < minQuantity) {
                qtyInput.value = minQuantity;
                Swal.fire({
                    icon: "warning",
                    title: "จำนวนสินค้าไม่ถูกต้อง",
                    text: `จำนวนที่ป้อน (${quantity}) น้อยกว่าจำนวนขั้นต่ำ (${minQuantity}) สำหรับการสั่งสินค้านี้ (${product.name}). ระบบจะปรับเป็น ${minQuantity}.`,
                    confirmButtonText: "ตกลง",
                    confirmButtonColor: "#e74c3c",
                });
                return;
            }

            if (product.price === "N/A" || product.price === null || product.price === undefined || product.price === 0) {
                Swal.fire({
                    icon: "error",
                    title: "ไม่สามารถสั่งซื้อได้",
                    text: `สินค้านี้ ${product.name} ยังไม่มีข้อมูลราคาที่ถูกต้องสำหรับพื้นที่ที่คุณเลือก.`,
                    confirmButtonText: "ตกลง",
                    confirmButtonColor: "#e74c3c",
                }).then((result) => {
                    if (result.isConfirmed) {
                        filterProducts(); // ถ้าฟังก์ชันนี้มีอยู่
                        closeProductPopup();
                    }
                });
            } else {
                const itemToBuy = {
                    ...product,
                    quantity: quantity
                };
                localStorage.setItem('buyNowItem', JSON.stringify(itemToBuy));

                window.location.href = '/pages/products/checkout.html';
            }
        });
    }
}

function openImageZoomPopup(imageSrc) {
    const imageZoomPopup = document.getElementById('imageZoomPopup');
    const zoomedImage = document.getElementById('zoomed-image');
    
    zoomedImage.src = imageSrc; 
    imageZoomPopup.classList.add('is-visible');

    document.body.classList.add('no-scroll'); 
}

function closeImageZoomPopup() {
    const imageZoomPopup = document.getElementById('imageZoomPopup');
    imageZoomPopup.classList.remove('is-visible'); 
    
    const productDetailPopup = document.getElementById('productDetailPopup');
    if (productDetailPopup.classList.contains('hidden')) { 
        document.body.classList.remove('no-scroll');
    }
}

document.addEventListener('keydown', (event) => {
    const productDetailPopup = document.getElementById('productDetailPopup');
    const imageZoomPopup = document.getElementById('imageZoomPopup');
    
    if (event.key === 'Escape' || event.key === 'Esc') {
        if (imageZoomPopup.classList.contains('is-visible')) {
            closeImageZoomPopup();
        } 
        else if (!productDetailPopup.classList.contains('hidden')) { 
            closeProductPopup();
        }
    }
});

function closeProductPopup() {
    document.getElementById("productDetailPopup").classList.add("hidden");
    
    const imageZoomPopup = document.getElementById('imageZoomPopup');
    if (!imageZoomPopup.classList.contains('is-visible')) {
        document.body.classList.remove('no-scroll');
    }
}

function changeQty(index, delta) {
    const item = cart[index];
    const newQty = item.qty + delta;
    const minQuantityForItem = item.type === "bag" ? 640 : (parseInt(item.minimum) || 1); // ตรวจสอบตรงนี้

    if (newQty >= minQuantityForItem) {
        item.qty = newQty;
    } else {
        Swal.fire({
            icon: "warning",
            title: "จำนวนสินค้าขั้นต่ำ",
            text: `สำหรับสินค้า ${item.name} จำนวนขั้นต่ำคือ ${minQuantityForItem} ${item.unit || 'ชิ้น'}.`,
            confirmButtonText: "ตกลง",
            confirmButtonColor: "#e74c3c",
        });
    }
    updateCartUI();
    localStorage.setItem("currentCart", JSON.stringify(cart));
}

function removeFromCart(index) {
    cart.splice(index, 1);
    updateCartUI();
    localStorage.setItem("currentCart", JSON.stringify(cart));
}

function updateCartUI() {

    const cartItemsEl = document.getElementById("cartItems");
    const cartSummaryEl = document.getElementById("cartSummary");
    const checkoutBtn = document.querySelector("#cartSummary button");
    const provinceFilter = document.getElementById("provinceFilter");
    const districtFilter = document.getElementById("districtFilter");
    const searchButton = document.querySelector('.pro-s-filter-bar button[onclick="filterProducts()"]');

    const selectedProvince = provinceFilter ? provinceFilter.value : "ไม่ได้เลือก";
    const selectedDistrict = districtFilter ? districtFilter.value : "ไม่ได้เลือก";

    const deliveryAreaText = (selectedProvince && selectedDistrict) &&
                             (selectedProvince !== "" && selectedDistrict !== "") ?
                             `${selectedProvince}, ${selectedDistrict}` : "กรุณาเลือกพื้นที่จัดส่ง";

    if (cart.length > 0) {
        if (provinceFilter) provinceFilter.disabled = true;
        if (districtFilter) districtFilter.disabled = true;
        if (searchButton) searchButton.disabled = true;
    } else {
        if (provinceFilter) provinceFilter.disabled = false;
        if (districtFilter) districtFilter.disabled = false;
        if (searchButton) searchButton.disabled = false;
    }

    updateCartItemCount();
    localStorage.setItem("currentCart", JSON.stringify(cart));

    cartItemsEl.innerHTML = "";
    let totalIncludingVatFromItems = 0;

    if (cart.length === 0) {
        cartItemsEl.innerHTML = `<div class="empty-cart-state"><i class="fas fa-shopping-basket" style="font-size: 3rem; color: #ccc; margin-bottom: 15px;"></i><p>ไม่มีสินค้าในตะกร้าของคุณ</p><a href="/pages/products/products_showall.html" class="back-to-shop-btn">เลือกซื้อสินค้า</a></div>`;
        cartSummaryEl.innerHTML = `
            <div><p style="font-size: 15px; color: #988383;" >พื้นที่จัดส่ง: ${deliveryAreaText}</p></div>
            <p>ยอดสุทธิ (ไม่รวม VAT): 0 บาท</p>
            <p><strong>ราคารวม: 0 บาท</strong></p>
            <button disabled>ดำเนินการชำระเงิน</button>
        `;
        updateCartItemCount();
        return;
    }

    cart.forEach((item, index) => {
        const itemEl = document.createElement("div");
        itemEl.className = "cart-item";
        itemEl.innerHTML = `
            <div class="cart-item-horizontal">
                
                <div class="cart-img">
                    <img src="/assets/images/products/${item.image}" alt="${item.name}">
                </div>

                <div class="cart-info">
                    <div class="cart-name">${item.name}</div>
                    <div class="cart-price">ราคา: ${parseFloat(item.price).toLocaleString()} บาท</div>
                    <div class="qty-control">
                        <button onclick="changeQty(${index}, -1)">-</button>
                        <span>${item.qty}</span>
                        <button onclick="changeQty(${index}, 1)">+</button>
                    </div>
                </div>

                <div class="cart-remove">
                    <button onclick="removeFromCart(${index})">ยกเลิก</button>
                </div>
            </div>`;
        cartItemsEl.appendChild(itemEl);
        totalIncludingVatFromItems += (parseFloat(item.price) || 0) * item.qty;
    });

    const totalExcludingVat = totalIncludingVatFromItems / 1.07;
    const vatAmount = totalIncludingVatFromItems - totalExcludingVat;

    cartSummaryEl.innerHTML = `
        <div><p style="font-size: 15px; color: #988383;" >พื้นที่จัดส่ง: ${deliveryAreaText}</p></div>
        <p>ยอดสุทธิ (ไม่รวม VAT): ${totalExcludingVat.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })} บาท</p>
        <p><strong>ราคารวม: ${totalIncludingVatFromItems.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })} บาท</strong></p>
        <button onclick="checkoutCart()">ดำเนินการชำระเงิน</button>
    `;

    if (checkoutBtn) {
        checkoutBtn.disabled = false;
    }

    updateCartItemCount();
    localStorage.setItem("currentCart", JSON.stringify(cart));
}

function checkoutCart() {
    localStorage.setItem("checkoutCartItems", JSON.stringify(cart));
    
    localStorage.removeItem("buyNowItem"); 

    cart = [];
    localStorage.removeItem("currentCart");
    updateCartUI();

    window.location.href = "/pages/products/checkout.html";
}

function addToCart(productData, quantityToAddFromPopup) {
    const province = document.getElementById("provinceFilter").value;
    const district = document.getElementById("districtFilter").value;
  
    if (!province || !district) {
        Swal.fire({
            icon: "warning",
            title: "กรุณาเลือกพื้นที่ก่อน",
            text: "คุณต้องเลือกจังหวัดและอำเภอก่อนที่จะเพิ่มสินค้าในตะกร้า",
            confirmButtonText: "ตกลง",
            confirmButtonColor: "#e74c3c",
        });
        return;
    }

    const minQuantityForProduct = productData.type === "bag" ? 640 : (parseInt(productData.minimum) || 1);

    let finalQuantityToAdd;

    if (quantityToAddFromPopup !== undefined && !isNaN(parseInt(quantityToAddFromPopup))) {
        finalQuantityToAdd = parseInt(quantityToAddFromPopup);
        if (finalQuantityToAdd < minQuantityForProduct) {
            finalQuantityToAdd = minQuantityForProduct;
            console.warn(`Quantity adjusted to minimum from popup input. Original: ${quantityToAddFromPopup}, Adjusted: ${finalQuantityToAdd}`);
        }
    } else {
        finalQuantityToAdd = minQuantityForProduct;
        console.log(`Using default/minimum quantity for product: ${productData.name}, Quantity: ${finalQuantityToAdd}`);
    }

    const existing = cart.find((item) => item.id === productData.id);
    if (existing) {
        existing.qty += finalQuantityToAdd;
    } else {
        cart.push({ ...productData, qty: finalQuantityToAdd, province: province, district: district });
    }

    updateCartUI();

    
    
    showCart();
}

function addToCartWithQty(product, qty) {
    const province = document.getElementById("provinceFilter").value;
    const district = document.getElementById("districtFilter").value;

    if (!province || !district) {
        Swal.fire({
            icon: "warning",
            title: "กรุณาเลือกพื้นที่จัดส่ง",
            text: "คุณต้องเลือกจังหวัดและอำเภอก่อนที่จะเพิ่มสินค้าในตะกร้า",
            confirmButtonText: "ตกลง",
            confirmButtonColor: "#e74c3c",
        });
        return;
    }

    let parsedQty = parseInt(qty);
    const minQuantity = product.type === "bag" ? 640 : (parseInt(product.minimum) || 1);

    if (isNaN(parsedQty) || parsedQty < minQuantity) {
        Swal.fire({
            icon: "warning",
            title: "จำนวนสินค้าไม่ถูกต้อง",
            text: `สำหรับสินค้า ${product.name} จำนวนขั้นต่ำคือ ${minQuantity} ${product.unit || 'ชิ้น'}.`,
            confirmButtonText: "ตกลง",
            confirmButtonColor: "#e74c3c",
        });
        return;
    }

    const existing = cart.find((item) => item.id === product.id);
    if (existing) {
        existing.qty += parsedQty;
    } else {
        cart.push({ ...product, qty: parsedQty });
    }

    updateCartUI();

    showCart();

    Swal.fire({
        icon: 'success',
        title: 'เพิ่มสินค้าลงตะกร้าแล้ว',
        showConfirmButton: false,
        timer: 1500
    });
}

function buyNowWithQty(product, qty) {
    const province = document.getElementById("provinceFilter").value;
    const district = document.getElementById("districtFilter").value;

    if (!province || !district) {
        Swal.fire({
            icon: "warning",
            title: "กรุณาเลือกพื้นที่จัดส่ง",
            text: "คุณต้องเลือกจังหวัดและอำเภอก่อนที่จะดำเนินการ",
            confirmButtonText: "ตกลง",
            confirmButtonColor: "#e74c3c",
        });
        return;
    }

    let parsedQty = parseInt(qty);
    const minQuantity = product.type === "bag" ? 640 : (parseInt(product.minimum) || 1);

    if (isNaN(parsedQty) || parsedQty < minQuantity) {
        Swal.fire({
            icon: "warning",
            title: "จำนวนสินค้าไม่ถูกต้อง",
            text: `สำหรับสินค้า ${product.name} จำนวนขั้นต่ำคือ ${minQuantity} ${product.unit || 'ชิ้น'}.`,
            confirmButtonText: "ตกลง",
            confirmButtonColor: "#e74c3c",
        });
        return;
    }

    const itemToBuy = {
        ...product,
        quantity: parsedQty, // ใช้ 'quantity' เพื่อความสอดคล้องกับ checkout.html ที่อ่านจาก 'quantity'
        province: province, // เพิ่มจังหวัด
        district: district  // เพิ่มอำเภอ
    };

    // **สำคัญ**: ลบ checkoutCartItems ออก เพื่อให้มั่นใจว่าหน้า checkout จะไม่ใช้ข้อมูลตะกร้าเก่า
    localStorage.removeItem("checkoutCartItems"); 
    localStorage.setItem('buyNowItem', JSON.stringify(itemToBuy));

    window.location.href = "/pages/products/checkout.html";
}



function filterProducts() {
    const searchInput = document.getElementById("searchInput").value.toLowerCase();
    const province = document.getElementById("provinceFilter").value;
    const district = document.getElementById("districtFilter").value;

    if (!province || !district) {
        renderCards(allData.products, null, null); // แสดงสินค้าทั้งหมดหากไม่มีการเลือกพื้นที่
        return;
    }

    localStorage.setItem(
        "filterState",
        JSON.stringify({
            province,
            district,
            searchInput,
            currentType,
        })
    );

    const priceData = allData.prices?.[province]?.[district];

    if (!priceData) {
        document.getElementById("productGrid").innerHTML =
            "<p>ไม่พบข้อมูลราคาสำหรับพื้นที่นี้</p>"; // เปลี่ยนข้อความเป็น "ไม่พบข้อมูลราคา"
        return;
    }

    const filteredProducts = allData.products.filter((p) => {
        const text = `${p.name} ${p.description}`.toLowerCase();
        return (
            (!searchInput || text.includes(searchInput)) &&
            (currentType === "all" || p.type === currentType)
        );
    });

    document.getElementById("productGrid").scrollIntoView({
        behavior: "smooth",
    });

    renderCards(filteredProducts, priceData, {
        province,
        district,
    });
}

function formatPrice(price) {
    if (typeof price !== 'number' || isNaN(price)) {
        return price;
    }

    if (price === 0) {
        return "0 บาท";
    }

    if (price < 1000000) {
        return price.toLocaleString() + " บาท";
    }
    else {
        const millions = price / 1000000;
        const formattedMillions = parseFloat(millions.toFixed(1));
        return `${formattedMillions} ล้านบาท`;
    }
}

function renderCards(products, priceData, areaInfo) {
    const grid = document.getElementById("productGrid");
    grid.innerHTML = "";

    if (!products || products.length === 0) {
        grid.innerHTML = `<p style="padding: 20px; font-size: 5rem; color: #c62828;">ไม่พบสินค้าในพื้นที่ที่ท่านเลือก</p>`;
        return;
    }

    products.forEach((product) => {

        const price = priceData && priceData[product.id] !== undefined ? priceData[product.id] : "N/A";

        const productData = {
            ...product,
            price: price !== "N/A" ? parseFloat(price) : 0,
            province: areaInfo?.province || "",
            district: areaInfo?.district || "",
        };

        let priceDisplayText = '';
        let priceVisibilityClass = '';

        if (productData.price !== 0) {
            if (product.type === "bag") {
                priceDisplayText = `<strong>${formatPrice(productData.price)}/${product.unit || ''}</strong>`;
            } else {
                priceDisplayText = `<strong> ${formatPrice(productData.price)}/${product.unit || ''}</strong>`;
            }
        } else {
            priceDisplayText = `<strong>N/A บาท/${product.unit || ''}</strong>`;
            priceVisibilityClass = 'hide-na-price-text';
        }

        const card = document.createElement("div");
        card.className = "p-c-product-card";
        card.innerHTML = `<img src="/assets/images/products/${
                product.image || ''
            }" alt="${product.name}">
                        <div class="p-c-product-info">
                            <div class="pcpi-box">
                                <div class="p-c-product-title"><p>${product.name}</p></div>
                                <div class="pcpd-box">
                                  <div class="p-c-product-detail"><p>${product.description || ''}</p></div>
                                  <div class="p-c-product-detail"><p>${product.typeWork || ''}</p></div>
                                </div>
                                <div class="p-c-product-price">
                                    <p class="${priceVisibilityClass} ">ราคา: <span> ${priceDisplayText} </span></p>
                                    <p class="p-c-product-value">( บรรจุ ${product.weight}/${product.unit} )</p>
                                </div>
                                <div class="m-p-c-product-price">
                                    <p class="${priceVisibilityClass} "><span>฿ ${priceDisplayText} </span></p>
                                    <p class="m-p-c-product-value">( บรรจุ ${product.weight}/${product.unit} )</p>
                                </div>
                                <div>
                                </div>

                                <div class="p-c-product-area">
                                    <div><p >พื้นที่จัดส่ง: ${productData.province}, ${productData.district}</p></div>
                                </div>
                                <div class="m-p-c-product-area">
                                    <div><p > ${productData.province}, ${productData.district}</p></div>
                                </div>

                            </div>
                            <div style="display: flex; flex-direction: column; gap: 0.5rem;">
                                <button class="p-c-buy-btn" onclick='showProductPopup(${JSON.stringify(productData)})'><i class="fa-solid fa-magnifying-glass"></i> รายละเอียด</button>
                                <button class="p-c-add-cart-btn"><i class="fa-solid fa-cart-arrow-down"></i> เพิ่มลงตะกร้า</button>
                            </div>
                        </div>
            `;
        card.querySelector(".p-c-add-cart-btn").addEventListener("click", () => {
            if (productData.price === 0) {
                Swal.fire({
                    icon: "error",
                    title: "ไม่สามารถเพิ่มสินค้าได้",
                    text: `สินค้านี้ ${product.name} ยังไม่มีข้อมูลราคาที่ถูกต้องสำหรับพื้นที่ที่คุณเลือก. กรุณาเลือกจังหวัดและอำเภอที่ต้องการ เพื่อดูราคาและดำเนินการต่อ.`,
                    confirmButtonText: "ตกลง",
                    confirmButtonColor: "#e74c3c",
                }).then((result) => {
                    if (result.isConfirmed) {
                        filterProducts();
                    }
                });
            } else {
                addToCart(productData);
            }
        });

        grid.appendChild(card);
    });
}




// =============== SWITCH TYPE =================================
window.switchType = function (el, type) {
    currentType = type;
    document
        .querySelectorAll(".pro-s-pd-type")
        .forEach((tab) => tab.classList.remove("active"));
    document.querySelectorAll(".pro-s-pd-adv-type").forEach((tab) => tab.classList.remove("active")); // เพิ่มเพื่อให้ทำงานกับ adv-type ด้วย

    if (el) { 
        el.classList.add("active");
    }

    const otherTypeTabs = document.querySelectorAll(`.pro-s-pd-type[onclick*="'${type}'"]`);
    const otherAdvTypeTabs = document.querySelectorAll(`.pro-s-pd-adv-type[onclick*="'${type}'"]`);

    otherTypeTabs.forEach(tab => tab.classList.add('active'));
    otherAdvTypeTabs.forEach(tab => tab.classList.add('active'));


    if (allData) { 
        filterProducts();
    }
}

// =============== โหลดข้อมูล Products และ Prices ===================
async function fetchData() {
    try {
        const [datasResponse, areaResponse] = await Promise.all([
            fetch("/poon-singto-datas.json"), 
            fetch("/poon-singto-area.json")  
        ]);

        const datas = await datasResponse.json();
        const areaDataArray = await areaResponse.json(); 

        const provinces = areaDataArray.map(item => item.province);
        const districts = {};
        areaDataArray.forEach(item => {
            districts[item.province] = item.districts;
        });

        allData = {
            products: datas.products,
            prices: datas.prices,
            provinces: provinces,
            districts: districts
        };
        console.log("Data loaded and structured:", allData);

    } catch (error) {
        console.error("Error loading data:", error);
        document.getElementById("productGrid").innerHTML = `<p style="padding: 20px; font-size: 5rem; color: #c62828;">เกิดข้อผิดพลาดในการโหลดข้อมูลสินค้า</p>`;
    }
}

// =============== โหลดอำเภอตามจังหวัดที่เลือก =====================
function loadDistricts(selectedProvince) {
    const districtFilter = document.getElementById("districtFilter");
    districtFilter.innerHTML = '<option value="">เลือกอำเภอ/เขต</option>'; 

    if (selectedProvince && allData && allData.districts && allData.districts[selectedProvince]) {
        allData.districts[selectedProvince].forEach(district => {
            const option = document.createElement("option");
            option.value = district;
            option.textContent = district;
            districtFilter.appendChild(option);
        });
    }
}



// ฟังก์ชั่น Pop Up ข้อมูลวิธีการ ==================================================
document.getElementById("toggleTipsBtn").addEventListener("click", function () {
  const howToUse = document.querySelector(".pro-s-how-to-use-search");
  howToUse.classList.toggle("pro-s-hidden");
});
// =========================================================================






// <!-- /navigationJS -->
document.addEventListener('DOMContentLoaded', function() {
        const hamburgerMenu = document.querySelector('.hamburger-menu');
        const navList = document.querySelector('.nav-list');
        const mainNavContainer = document.querySelector('.NavOfPoonSingtoolayout'); // Get the main container

        hamburgerMenu.addEventListener('click', function() {
            hamburgerMenu.classList.toggle('active');
            navList.classList.toggle('active');
            // Optional: Toggle a class on the main container to adjust height/background if needed when menu is open
            // mainNavContainer.classList.toggle('menu-open'); 
        });

        // Optional: Close menu when a link is clicked (good for UX on mobile)
        navList.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', () => {
                // Only close if it's a mobile view (or if you want it to close on all clicks)
                if (window.innerWidth <= 768) { 
                    hamburgerMenu.classList.remove('active');
                    navList.classList.remove('active');
                    // mainNavContainer.classList.remove('menu-open');
                }
            });
        });

        // Optional: Close menu if window is resized above mobile breakpoint
        window.addEventListener('resize', () => {
            if (window.innerWidth > 768) {
                hamburgerMenu.classList.remove('active');
                navList.classList.remove('active');
                // mainNavContainer.classList.remove('menu-open');
            }
        });

        // Optional: Handle dropdowns for mobile if they are needed
        // For mobile dropdowns, you would typically toggle a class on click instead of hover
        const dropdownToggles = document.querySelectorAll('.dropdown > a');
        dropdownToggles.forEach(toggle => {
            toggle.addEventListener('click', function(event) {
                if (window.innerWidth <= 768) {
                    event.preventDefault(); // Prevent default link behavior
                    const dropdownMenu = this.nextElementSibling;
                    if (dropdownMenu && dropdownMenu.classList.contains('dropdown-menu')) {
                        // Close other open dropdowns
                        document.querySelectorAll('.dropdown-menu.active').forEach(menu => {
                            if (menu !== dropdownMenu) {
                                menu.classList.remove('active');
                            }
                        });
                        dropdownMenu.classList.toggle('active'); // Toggle visibility
                    }
                }
            });
        });
    });

</script>




</body>
</html>